<div class="container my-3">
	<h1>Browse PMKI datasets</h1>

	<div class="hbox">

		<div class="vbox" style="flex: 1">
			<div class="card">
				<div class="card-header">
					Dataset type
				</div>
				<div class="card-body">
					<div class="form-check">
						<label class="form-check-label">
							<input class="form-check-input" type="checkbox" [(ngModel)]="kosCheck" (ngModelChange)="onFacetChange()">
							KOS
						</label>
					</div>
					<div class="form-check">
						<label class="form-check-label">
							<input class="form-check-input" type="checkbox" [(ngModel)]="lexiconsCheck" (ngModelChange)="onFacetChange()">
							Lexicons
						</label>
					</div>
				</div>
            </div>
            
			<div class="card mt-1">
				<div class="card-header">
					Language
				</div>
				<div class="card-body">
					<div *ngFor="let lang of languages" class="form-check">
						<label class="form-check-label">
							<input class="form-check-input" type="checkbox">
							{{lang}}
						</label>
					</div>
				</div>
            </div>
            
        </div>
        

        
		<div class="vbox ml-2" style="flex: 4;">
            <div class="input-group mb-2">
                <input type="text" class="form-control" [(ngModel)]="searchString" (keydown.enter)="searchDataset()" placeholder="Search">
                <div class="input-group-append">
                    <button class="btn btn-info" (click)="searchDataset()">
                        <i class="fa fa-search"></i>
                    </button>
                </div>
            </div>

            <div *ngIf="loading" class="spinner-border text-info"></div>

            <ng-container *ngIf="!loading && projects">
                <h5 *ngIf="projects.length == 0" class="text-secondary">No dataset found for '{{lastSearch}}'</h5>

                <div *ngIf="projects.length != 0" class="card">
                    <div class="card-body scrollableContainer">
                        <div *ngFor="let p of projects" class="card mb-1">
                            <div class="card-body">
                                <h5 class="card-title">
                                    <p *ngIf="!p.isOpen()" class="text-muted">{{p.getName()}}</p>
                                    <a *ngIf="p.isOpen()" [routerLink]="" (click)="goToProject(p)">{{p.getName()}}</a>
                                </h5>
                                <div class="p-1 border-left border-bottom" style="position: absolute; top: 0; right: 0; border-bottom-left-radius: 5px">
                                    <span class="mr-2">
                                        <span class="mr-1">Model:</span><span class="badge badge-info">{{p.getModelType(true)}}</span>
                                    </span>
                                    <span>
                                        <span class="mr-1">Lexicalization:</span><span class="badge badge-info">{{p.getLexicalizationModelType(true)}}</span>
                                    </span>
                                </div>


                                <div class="p-1 border-left border-top" style="position: absolute; bottom: 0; right: 0; border-top-left-radius: 5px; line-height: 1rem">
                                    <button class="btn btn-outline-info btn-xs" (click)="createIndex(p)" title="Create index" [disabled]="!p.isOpen() || p.creatingIndex || globalCreatingIndex">
                                        <i *ngIf="!p.creatingIndex" class="fa fa-list-alt"></i>
                                        <div *ngIf="p.creatingIndex" class="spinner-border text-info" style="width: .75rem; height: .75rem;"></div>
                                    </button>
                                </div>

                                <!-- <h6 class="card-subtitle mb-2">
                                    <a [href]="p.getBaseURI()" target="_blank" class="text-success">{{p.getBaseURI()}}</a>
                                </h6> -->
                                <p class="card-text text-secondary">{{p.getBaseURI()}}</p>
                            </div>
                        </div>
                    </div>
                </div>
            </ng-container>

		</div>
	</div>
</div>